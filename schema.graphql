type App @entity {
  id: ID!
  owner: User!
  name: String!
  contracts: [Contract!]! @derivedFrom(field: "app")
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type Contract @entity {
  id: ID!
  type: String!
  owner: User!
  metadata: ContractData!
  nfts: [NFT!]! @derivedFrom(field: "contract")
  app: App
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type ContractData @entity {
  id: ID!
  name: String!
  symbol: String!
  totalSupply: BigInt!
  royaltyBps: BigInt
  royaltyRecipient: Bytes
}

type NFT @entity {
  id: ID!
  tokenId: BigInt!
  contract: Contract!
  owner: User!
  metadataURI: String!
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type User @entity {
  id: ID!
  apps: [App!] @derivedFrom(field: "creator")
  contracts: [Contract!] @derivedFrom(field: "creator")
  tokens: [Token!] @derivedFrom(field: "owner")
  nfts: [NFT!] @derivedFrom(field: "owner")
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type Token @entity {
  id: ID!
  owner: User!
  balance: BigInt!
  contract: Contract!
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}
